<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Kalkulator podziału kosztów LCL</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #fff;
      color: #222;
      margin: 0;
      padding: 0;
    }
    .page-content {
      padding: 40px;
      max-width: 1100px;
      margin: 0 auto;
    }
    h1 {
      color: #be1e2d;
      border-bottom: 2px solid #be1e2d;
      padding-bottom: 10px;
      margin-bottom: 30px;
      font-size: 2.3rem;
      text-align: center;
      font-weight: 700;
    }
    .section {
      background-color: #fafbfc;
      margin-bottom: 30px;
      border: 1.5px solid #e5e5e5;
      padding: 28px 24px;
      border-radius: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.03);
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    label {
      display: block;
      margin-top: 16px;
      font-weight: 500;
      color: #222;
    }
    select, input[type="number"] {
      padding: 7px 12px;
      border: 1.5px solid #ccc;
      border-radius: 7px;
      width: 100%;
      max-width: 320px;
      margin-top: 5px;
      font-size: 1rem;
      box-sizing: border-box;
      font-family: inherit;
    }
    button {
      margin-top: 25px;
      padding: 12px 28px;
      background-color: #be1e2d;
      color: white;
      border: none;
      border-radius: 7px;
      cursor: pointer;
      font-weight: 700;
      font-size: 1.04rem;
      transition: background-color 0.22s;
      letter-spacing: 0.03em;
    }
    button:hover {
      background-color: #a31520;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 24px;
    }
    th, td {
      border: 1.2px solid #e0e0e0;
      padding: 8px 11px;
      text-align: center;
      font-size: 1rem;
    }
    th {
      background-color: #f1f1f1;
      font-weight: 600;
    }
    td {
      background-color: #fafbfc;
    }
    tr.total-row td {
      background-color: #e9ecef;
      font-weight: 700;
    }
    .gray {
      background-color: #e9ecef !important;
    }
    @media (max-width: 800px) {
      .page-content { padding: 10px; }
      .section { padding: 10px 2px; }
      th, td { font-size: 0.94rem; padding: 7px 4px; }
    }
  </style>
</head>
<body>

<div class="page-content">
  <h1>Kalkulator podziału kosztów dla wielu załadowców</h1>
  <div class="section">
    <label for="shippers">Liczba załadowców:</label>
    <select id="shippers" onchange="renderShipperInputs()">
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
      <option value="9">9</option>
      <option value="10">10</option>
    </select>

    <div id="inputs"></div>

    <label style="margin-top:24px;">Koszty zagraniczne: <input type="number" id="cost_foreign" min="0" step="0.01" /></label>
    <label>Koszty lokalne: <input type="number" id="cost_local" min="0" step="0.01" /></label>
    <label>Ubezpieczenie: <input type="number" id="cost_ins" min="0" step="0.01" /></label>

    <button type="button" onclick="calculate()">Podziel koszty</button>

    <div id="result"></div>
  </div>
</div>

<script>
function renderShipperInputs() {
  const n = Number(document.getElementById('shippers').value);
  let html = '<table style="margin-bottom:0;"><tr><th>Przesyłka</th><th>Waga (kg)</th></tr>';
  for (let i = 0; i < n; i++) {
    html += `<tr>
      <td>${String.fromCharCode(65 + i)}</td>
      <td><input type="number" id="weight_${i}" min="0" step="0.01" style="width:100px;" /></td>
    </tr>`;
  }
  html += '</table>';
  document.getElementById('inputs').innerHTML = html;
  document.getElementById('result').innerHTML = '';
}
renderShipperInputs();

function calculate() {
  const n = Number(document.getElementById('shippers').value);
  let weights = [];
  let sumWeight = 0;
  for (let i = 0; i < n; i++) {
    let w = parseFloat(document.getElementById('weight_' + i).value);
    if (isNaN(w) || w <= 0) { alert('Wprowadź poprawne wagi dla wszystkich przesyłek!'); return; }
    weights.push(w);
    sumWeight += w;
  }

  let costForeign = parseFloat(document.getElementById('cost_foreign').value) || 0;
  let costLocal = parseFloat(document.getElementById('cost_local').value) || 0;
  let costIns = parseFloat(document.getElementById('cost_ins').value) || 0;

  if (sumWeight === 0) { alert('Suma wag nie może być zerowa.'); return; }

  let html = `<table>
    <tr>
      <th>Przesyłka</th>
      <th>Waga (kg)</th>
      <th>Koszty zagraniczne</th>
      <th>Koszty lokalne</th>
      <th>Ubezpieczenie</th>
    </tr>`;

  let totalForeign = 0, totalLocal = 0, totalIns = 0;
  for (let i = 0; i < n; i++) {
    let share = weights[i] / sumWeight;
    let f = +(costForeign * share).toFixed(2);
    let l = +(costLocal * share).toFixed(2);
    let ins = +(costIns * share).toFixed(2);
    totalForeign += f;
    totalLocal += l;
    totalIns += ins;
    html += `<tr>
      <td>${String.fromCharCode(65 + i)}</td>
      <td>${weights[i].toFixed(2)}</td>
      <td class="gray">${f}</td>
      <td class="gray">${l}</td>
      <td class="gray">${ins}</td>
    </tr>`;
  }
  html += `<tr class="total-row">
    <td>SUMA</td>
    <td>${sumWeight.toFixed(2)}</td>
    <td>${totalForeign.toFixed(2)}</td>
    <td>${totalLocal.toFixed(2)}</td>
    <td>${totalIns.toFixed(2)}</td>
  </tr></table>`;

  document.getElementById('result').innerHTML = html;
}
</script>
</body>
</html>
